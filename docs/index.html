<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tools for Defensive Programming • attempt</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Tools for Defensive Programming">
<meta property="og:description" content="Tools for defensive programming, inspired by 'purrr' mappers and 
    based on 'rlang'.'attempt' extends and facilitates defensive programming by 
    providing a consistent grammar, and provides a set of easy to use functions 
    for common tests and conditions. 'attempt' only depends on 'rlang', and 
    focuses on speed, so it can be easily integrated in other functions and 
    used in data analysis. ">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">attempt</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.3.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/a_intro_attempt.html">attempt</a>
    </li>
    <li>
      <a href="articles/b_try_catch.html">Try Catch</a>
    </li>
    <li>
      <a href="articles/c_adverbs.html">Adverbs</a>
    </li>
    <li>
      <a href="articles/d_if.html">If</a>
    </li>
    <li>
      <a href="articles/e_conditions.html">Condition handling</a>
    </li>
    <li>
      <a href="articles/tests_and_coverage.html">Tests and Coverage</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->

<div id="attempt-0-3-0-9000" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#attempt-0-3-0-9000" class="anchor"></a>{attempt} 0.3.0.9000</h1></div>
<p><img src="https://raw.githubusercontent.com/ColinFay/attempt/master/README-fig/attempt_hex_200.png"></p>
<p>A Friendlier Condition Handler for R, inspired by {purrr} mappers and based on {rlang}.</p>
<p>{attempt} is designed to handle the cases when something / someone attempts to do something it shouldn’t.</p>
<p>For example:</p>
<ul>
<li>an attempt to run a <code>log("a")</code> (error)</li>
<li>an attempt to connect to a web API without an internet connexion (error)</li>
<li>an attempt to <code>paste()</code> <code>"good morning"</code> and <code>iris</code> (message/warning)</li>
<li>…</li>
</ul>
<p>{attempt} provides several condition handlers, from try catch to simple message printing.</p>
<p>{attempt} only depends on {rlang}, and every function is design to be fast, making it easy to implement in other functions and packages.</p>
</div>
<div id="install" class="section level1">
<h1 class="hasAnchor">
<a href="#install" class="anchor"></a>Install</h1>
<p>From CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">install.packages</span>(<span class="st">"attempt"</span>)</a></code></pre></div>
<p>The dev version:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"ColinFay/attempt"</span>)</a></code></pre></div>
</div>
<div id="reference" class="section level1">
<h1 class="hasAnchor">
<a href="#reference" class="anchor"></a>Reference</h1>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">library</span>(attempt)</a></code></pre></div>
<div id="attempt" class="section level2">
<h2 class="hasAnchor">
<a href="#attempt" class="anchor"></a>attempt</h2>
<p><code>attempt</code> is a wrapper around base <code>try</code> that allows you to insert a custom messsage on error.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="reference/attempt.html">attempt</a></span>(<span class="kw">log</span>(<span class="st">"a"</span>))</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co"># Error: non-numeric argument to mathematical function</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="kw"><a href="reference/attempt.html">attempt</a></span>(<span class="kw">log</span>(<span class="st">"a"</span>), <span class="dt">msg =</span> <span class="st">"Nop !"</span>)</a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co"># Error: Nop !</span></a></code></pre></div>
<p>You can make it verbose (i.e. returning the expression):</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="reference/attempt.html">attempt</a></span>(<span class="kw">log</span>(<span class="st">"a"</span>), <span class="dt">msg =</span> <span class="st">"Nop !"</span>, <span class="dt">verbose =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="co"># Error in log("a"): Nop !</span></a></code></pre></div>
<p>Of course the result is returned if there is one:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="reference/attempt.html">attempt</a></span>(<span class="kw">log</span>(<span class="dv">1</span>), <span class="dt">msg =</span> <span class="st">"Nop !"</span>, <span class="dt">verbose =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co"># [1] 0</span></a></code></pre></div>
<p>As with <code>try</code>, the result can be saved as an error object:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="kw"><a href="reference/attempt.html">attempt</a></span>(<span class="kw">log</span>(<span class="st">"a"</span>), <span class="dt">msg =</span> <span class="st">"Nop !"</span>, <span class="dt">verbose =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">a</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co"># [1] "Error in log(\"a\"): Nop !\n"</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co"># attr(,"class")</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co"># [1] "try-error"</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co"># attr(,"condition")</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co"># &lt;simpleError in log("a"): Nop !&gt;</span></a></code></pre></div>
</div>
<div id="silent_attempt" class="section level2">
<h2 class="hasAnchor">
<a href="#silent_attempt" class="anchor"></a>silent_attempt</h2>
<p><code>silent_attempt</code> is a wrapper around <code>silently</code> (see further down for more info) and <code>attempt</code>. It attempts to run the expr, stays silent if the expression succeeds, and returns error or warnings if any.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="reference/silent_attempt.html">silent_attempt</a></span>(<span class="kw">log</span>(<span class="st">"a"</span>))</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co"># Error: non-numeric argument to mathematical function</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="kw"><a href="reference/silent_attempt.html">silent_attempt</a></span>(<span class="kw">log</span>(<span class="dv">1</span>))</a></code></pre></div>
</div>
<div id="try-catch" class="section level2">
<h2 class="hasAnchor">
<a href="#try-catch" class="anchor"></a>try catch</h2>
<p>You can write a try catch with these params:</p>
<ul>
<li>
<code>expr</code> the expression to be evaluated</li>
<li>
<code>.e</code> a mapper or a function evaluated when an error occurs</li>
<li>
<code>.w</code> a mapper or a function evaluated when a warning occurs</li>
<li>
<code>.f</code> a mapper or an expression which is always evaluated before returning or exiting</li>
</ul>
<p>In <code>.e</code> and <code>.f</code>, the <code>.x</code> refers to the error / warning object.</p>
<div id="with-mappers" class="section level3">
<h3 class="hasAnchor">
<a href="#with-mappers" class="anchor"></a>With mappers</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="reference/try_catch.html">try_catch</a></span>(<span class="dt">expr =</span> <span class="kw">log</span>(<span class="st">"a"</span>), </a>
<a class="sourceLine" id="cb9-2" data-line-number="2">          <span class="dt">.e =</span> <span class="op">~</span><span class="st"> </span><span class="kw">paste0</span>(<span class="st">"There is an error: "</span>, .x), </a>
<a class="sourceLine" id="cb9-3" data-line-number="3">          <span class="dt">.w =</span> <span class="op">~</span><span class="st"> </span><span class="kw">paste0</span>(<span class="st">"This is a warning: "</span>, .x))</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co">#[1] "There is an error: Error in log(\"a\"): non-numeric argument to mathematical function\n"</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="kw"><a href="reference/try_catch.html">try_catch</a></span>(<span class="kw">log</span>(<span class="st">"a"</span>), </a>
<a class="sourceLine" id="cb9-7" data-line-number="7">          <span class="dt">.e =</span> <span class="op">~</span><span class="st"> </span><span class="kw">stop</span>(.x), </a>
<a class="sourceLine" id="cb9-8" data-line-number="8">          <span class="dt">.w =</span> <span class="op">~</span><span class="st"> </span><span class="kw">warning</span>(.x))</a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="co"># Error in log("a") : non-numeric argument to mathematical function</span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="kw"><a href="reference/try_catch.html">try_catch</a></span>(<span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">nrow=</span> <span class="dv">2</span>), </a>
<a class="sourceLine" id="cb9-12" data-line-number="12">          <span class="dt">.e =</span> <span class="op">~</span><span class="st"> </span><span class="kw">print</span>(.x), </a>
<a class="sourceLine" id="cb9-13" data-line-number="13">          <span class="dt">.w =</span> <span class="op">~</span><span class="st"> </span><span class="kw">print</span>(.x))</a>
<a class="sourceLine" id="cb9-14" data-line-number="14"><span class="co">#&lt;simpleWarning in matrix(1:3, nrow = 2): data length [3] is not a sub-multiple or multiple of the number of rows [2]&gt;</span></a>
<a class="sourceLine" id="cb9-15" data-line-number="15"></a>
<a class="sourceLine" id="cb9-16" data-line-number="16"><span class="kw"><a href="reference/try_catch.html">try_catch</a></span>(<span class="dt">expr =</span> <span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span> , </a>
<a class="sourceLine" id="cb9-17" data-line-number="17">          <span class="dt">.f =</span> <span class="op">~</span><span class="st"> </span><span class="kw">print</span>(<span class="st">"Using R for addition... ok I'm out!"</span>))</a>
<a class="sourceLine" id="cb9-18" data-line-number="18"><span class="co"># [1] "Using R for addition... ok I'm out!"</span></a>
<a class="sourceLine" id="cb9-19" data-line-number="19"><span class="co"># [1] 4</span></a></code></pre></div>
<p>As usual, the handlers are set only if you call them:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="reference/try_catch.html">try_catch</a></span>(<span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">nrow =</span> <span class="dv">2</span>), <span class="dt">.e =</span> <span class="op">~</span><span class="st"> </span><span class="kw">print</span>(<span class="st">"error"</span>))</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co">#      [,1] [,2]</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co"># [1,]    1    3</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co"># [2,]    2    1</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co"># Warning message:</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co"># In matrix(1:3, nrow = 2) :</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co"># data length [3] is not a sub-multiple or multiple of the number of rows [2]</span></a></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="reference/try_catch.html">try_catch</a></span>(<span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">nrow =</span> <span class="dv">2</span>), <span class="dt">.w =</span> <span class="op">~</span><span class="st"> </span><span class="kw">print</span>(<span class="st">"warning"</span>))</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="co"># [1] "warning"</span></a></code></pre></div>
</div>
<div id="traditionnal-way" class="section level3">
<h3 class="hasAnchor">
<a href="#traditionnal-way" class="anchor"></a>Traditionnal way</h3>
<p>{attempt} is flexible in how you can specify your arguments.</p>
<p>You can, as you do with {base} <code>tryCatch</code>, use a plain old function:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw"><a href="reference/try_catch.html">try_catch</a></span>(<span class="kw">log</span>(<span class="st">"a"</span>), </a>
<a class="sourceLine" id="cb12-2" data-line-number="2">          <span class="dt">.e =</span> <span class="cf">function</span>(e){</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">            <span class="kw">print</span>(<span class="kw">paste0</span>(<span class="st">"There is an error: "</span>, e))</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">            <span class="kw">print</span>(<span class="st">"Ok, let's save this"</span>)</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">            time &lt;-<span class="st"> </span><span class="kw">Sys.time</span>()</a>
<a class="sourceLine" id="cb12-6" data-line-number="6">            a &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">"+ At"</span>,time, <span class="st">", </span><span class="ch">\n</span><span class="st">Error:"</span>,e)</a>
<a class="sourceLine" id="cb12-7" data-line-number="7">            <span class="co"># write(a, "log.txt", append = TRUE) # commented to prevent log.txt creation </span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8">            <span class="kw">print</span>(<span class="kw">paste</span>(<span class="st">"log saved on log.txt at"</span>, time))</a>
<a class="sourceLine" id="cb12-9" data-line-number="9">            <span class="kw">print</span>(<span class="st">"let's move on now"</span>)</a>
<a class="sourceLine" id="cb12-10" data-line-number="10">          })</a>
<a class="sourceLine" id="cb12-11" data-line-number="11"></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="co"># [1] "There is an error: Error in log(\"a\"): non-numeric argument to mathematical function\n"</span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="co"># [1] "Ok, let's save this"</span></a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="co"># [1] "log saved on log.txt at 2018-01-30 16:59:13"</span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15"><span class="co"># [1] "let's move on now"</span></a></code></pre></div>
<p>You can even mix both:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw"><a href="reference/try_catch.html">try_catch</a></span>(<span class="kw">log</span>(<span class="st">"a"</span>), </a>
<a class="sourceLine" id="cb13-2" data-line-number="2">          <span class="dt">.e =</span> <span class="cf">function</span>(e){</a>
<a class="sourceLine" id="cb13-3" data-line-number="3">            <span class="kw">paste0</span>(<span class="st">"There is an error: "</span>, e)</a>
<a class="sourceLine" id="cb13-4" data-line-number="4">          },</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">          <span class="dt">.f =</span> <span class="op">~</span><span class="st"> </span><span class="kw">print</span>(<span class="st">"I'm not sure you can do that pal !"</span>))</a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co"># [1] "I'm not sure you can do that pal !"</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="co"># [1] "There is an error: Error in log(\"a\"): non-numeric argument to mathematical function\n"</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"></a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="kw"><a href="reference/try_catch.html">try_catch</a></span>(<span class="kw">log</span>(<span class="st">"a"</span>), </a>
<a class="sourceLine" id="cb13-10" data-line-number="10">          <span class="dt">.e =</span> <span class="op">~</span><span class="st"> </span><span class="kw">paste0</span>(<span class="st">"There is an error: "</span>, .x),</a>
<a class="sourceLine" id="cb13-11" data-line-number="11">          <span class="dt">.f =</span> <span class="cf">function</span>() <span class="kw">print</span>(<span class="st">"I'm not sure you can do that pal !"</span>))</a>
<a class="sourceLine" id="cb13-12" data-line-number="12"><span class="co"># [1] "I'm not sure you can do that pal !"</span></a>
<a class="sourceLine" id="cb13-13" data-line-number="13"><span class="co"># [1] "There is an error: Error in log(\"a\"): non-numeric argument to mathematical function\n"</span></a></code></pre></div>
</div>
<div id="try_catch_df" class="section level3">
<h3 class="hasAnchor">
<a href="#try_catch_df" class="anchor"></a>try_catch_df</h3>
<p><code>try_catch_df</code> returns a tibble with the call, the error message if any, the warning message if any, and the value of the evaluated expression or “error”. The values will always be contained in a list-column.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">res_log &lt;-<span class="st"> </span><span class="kw"><a href="reference/try_catch.html">try_catch_df</a></span>(<span class="kw">log</span>(<span class="st">"a"</span>))</a>
<a class="sourceLine" id="cb14-2" data-line-number="2">res_log</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co">#&gt;       call                                         error warning value</span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co">#&gt; 1 log("a") non-numeric argument to mathematical function      NA error</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5">res_log<span class="op">$</span>value</a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="co">#&gt; [1] "error"</span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"></a>
<a class="sourceLine" id="cb14-9" data-line-number="9">res_matrix &lt;-<span class="st"> </span><span class="kw"><a href="reference/try_catch.html">try_catch_df</a></span>(<span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">nrow =</span> <span class="dv">2</span>))</a>
<a class="sourceLine" id="cb14-10" data-line-number="10">res_matrix</a>
<a class="sourceLine" id="cb14-11" data-line-number="11"><span class="co">#&gt;                    call error</span></a>
<a class="sourceLine" id="cb14-12" data-line-number="12"><span class="co">#&gt; 1 matrix(1:3, nrow = 2)    NA</span></a>
<a class="sourceLine" id="cb14-13" data-line-number="13"><span class="co">#&gt;                                                                       warning</span></a>
<a class="sourceLine" id="cb14-14" data-line-number="14"><span class="co">#&gt; 1 data length [3] is not a sub-multiple or multiple of the number of rows [2]</span></a>
<a class="sourceLine" id="cb14-15" data-line-number="15"><span class="co">#&gt;        value</span></a>
<a class="sourceLine" id="cb14-16" data-line-number="16"><span class="co">#&gt; 1 1, 2, 3, 1</span></a>
<a class="sourceLine" id="cb14-17" data-line-number="17">res_matrix<span class="op">$</span>value</a>
<a class="sourceLine" id="cb14-18" data-line-number="18"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb14-19" data-line-number="19"><span class="co">#&gt;      [,1] [,2]</span></a>
<a class="sourceLine" id="cb14-20" data-line-number="20"><span class="co">#&gt; [1,]    1    3</span></a>
<a class="sourceLine" id="cb14-21" data-line-number="21"><span class="co">#&gt; [2,]    2    1</span></a>
<a class="sourceLine" id="cb14-22" data-line-number="22"></a>
<a class="sourceLine" id="cb14-23" data-line-number="23">res_success &lt;-<span class="st"> </span><span class="kw"><a href="reference/try_catch.html">try_catch_df</a></span>(<span class="kw">log</span>(<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb14-24" data-line-number="24">res_success</a>
<a class="sourceLine" id="cb14-25" data-line-number="25"><span class="co">#&gt;     call error warning value</span></a>
<a class="sourceLine" id="cb14-26" data-line-number="26"><span class="co">#&gt; 1 log(1)    NA      NA     0</span></a>
<a class="sourceLine" id="cb14-27" data-line-number="27">res_success<span class="op">$</span>value</a>
<a class="sourceLine" id="cb14-28" data-line-number="28"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb14-29" data-line-number="29"><span class="co">#&gt; [1] 0</span></a></code></pre></div>
</div>
<div id="map-try_catch" class="section level3">
<h3 class="hasAnchor">
<a href="#map-try_catch" class="anchor"></a>map try_catch</h3>
<p><code>map_try_catch</code> and <code>map_try_catch_df</code> allow you to map on a list of arguments <code>l</code>, to be evaluated by the function in <code>fun</code>.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw"><a href="reference/try_catch.html">map_try_catch</a></span>(<span class="dt">l =</span> <span class="kw">list</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="st">"a"</span>), <span class="dt">fun =</span> log, <span class="dt">.e =</span> <span class="op">~</span><span class="st"> </span>.x)</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co">#&gt; [1] 0</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb15-5" data-line-number="5"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb15-6" data-line-number="6"><span class="co">#&gt; [1] 1.098612</span></a>
<a class="sourceLine" id="cb15-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb15-8" data-line-number="8"><span class="co">#&gt; [[3]]</span></a>
<a class="sourceLine" id="cb15-9" data-line-number="9"><span class="co">#&gt; &lt;simpleError in .Primitive("log")("a"): non-numeric argument to mathematical function&gt;</span></a>
<a class="sourceLine" id="cb15-10" data-line-number="10"></a>
<a class="sourceLine" id="cb15-11" data-line-number="11"><span class="kw"><a href="reference/try_catch.html">map_try_catch_df</a></span>(<span class="kw">list</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="st">"a"</span>), log)</a>
<a class="sourceLine" id="cb15-12" data-line-number="12"><span class="co">#&gt;                     call                                         error</span></a>
<a class="sourceLine" id="cb15-13" data-line-number="13"><span class="co">#&gt; 1   .Primitive("log")(1)                                          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb15-14" data-line-number="14"><span class="co">#&gt; 2   .Primitive("log")(3)                                          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb15-15" data-line-number="15"><span class="co">#&gt; 3 .Primitive("log")("a") non-numeric argument to mathematical function</span></a>
<a class="sourceLine" id="cb15-16" data-line-number="16"><span class="co">#&gt;   warning    value</span></a>
<a class="sourceLine" id="cb15-17" data-line-number="17"><span class="co">#&gt; 1      NA        0</span></a>
<a class="sourceLine" id="cb15-18" data-line-number="18"><span class="co">#&gt; 2      NA 1.098612</span></a>
<a class="sourceLine" id="cb15-19" data-line-number="19"><span class="co">#&gt; 3      NA    error</span></a></code></pre></div>
</div>
</div>
<div id="adverbs" class="section level2">
<h2 class="hasAnchor">
<a href="#adverbs" class="anchor"></a>Adverbs</h2>
<p>Adverbs take a function and return a modified function.</p>
<div id="silently" class="section level3">
<h3 class="hasAnchor">
<a href="#silently" class="anchor"></a>silently</h3>
<p><code>silently</code> transforms a function so that when you call this new function, it returns nothing unless there is an error or a warning (contrary to <code>attempt</code> that returns the result). In a sense, the new function stay silent unless error or warning.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">silent_log &lt;-<span class="st"> </span><span class="kw"><a href="reference/silently.html">silently</a></span>(log)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="kw">silent_log</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="kw">silent_log</span>(<span class="st">"a"</span>)</a>
<a class="sourceLine" id="cb16-4" data-line-number="4"><span class="co"># Error in .f(...) : non-numeric argument to mathematical function</span></a></code></pre></div>
<p>With <code>silently</code>, the result is never returned.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">silent_matrix &lt;-<span class="st"> </span><span class="kw"><a href="reference/silently.html">silently</a></span>(matrix)</a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="kw">silent_matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="co">#Warning message:</span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="co">#In .f(...) :</span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="co">#  data length [3] is not a sub-multiple or multiple of the number of rows [2]</span></a></code></pre></div>
</div>
<div id="surely" class="section level3">
<h3 class="hasAnchor">
<a href="#surely" class="anchor"></a>surely</h3>
<p><code>surely</code> transforms a function so that when you call this new function, it calls <code><a href="reference/attempt.html">attempt()</a></code> - i.e. in the code below, calling <code>sure_log(1)</code> is the same as calling <code><a href="reference/attempt.html">attempt(log(1))</a></code>. In a sense, you’re sure this new function will always work.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">sure_log &lt;-<span class="st"> </span><span class="kw"><a href="reference/surely.html">surely</a></span>(log)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="kw">sure_log</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="co"># [1] 0</span></a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="kw">sure_log</span>(<span class="st">"a"</span>)</a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="co"># Error: non-numeric argument to mathematical function</span></a></code></pre></div>
</div>
<div id="with_message-and-with_warning" class="section level3">
<h3 class="hasAnchor">
<a href="#with_message-and-with_warning" class="anchor"></a><code>with_message</code> and <code>with_warning</code>
</h3>
<p>These two functions take a function, and add a warning or a message to it.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">as_num_msg &lt;-<span class="st"> </span><span class="kw"><a href="reference/messagefunctions.html">with_message</a></span>(as.numeric, <span class="dt">msg =</span> <span class="st">"We're performing a numeric conversion"</span>)</a>
<a class="sourceLine" id="cb19-2" data-line-number="2">as_num_warn &lt;-<span class="st"> </span><span class="kw"><a href="reference/messagefunctions.html">with_warning</a></span>(as.numeric, <span class="dt">msg =</span> <span class="st">"We're performing a numeric conversion"</span>)</a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="kw">as_num_msg</span>(<span class="st">"1"</span>)</a>
<a class="sourceLine" id="cb19-4" data-line-number="4"><span class="co">#&gt; We're performing a numeric conversion</span></a>
<a class="sourceLine" id="cb19-5" data-line-number="5"><span class="co">#&gt; [1] 1</span></a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="kw">as_num_warn</span>(<span class="st">"1"</span>)</a>
<a class="sourceLine" id="cb19-7" data-line-number="7"><span class="co">#&gt; Warning in as_num_warn("1"): We're performing a numeric conversion</span></a>
<a class="sourceLine" id="cb19-8" data-line-number="8"><span class="co">#&gt; [1] 1</span></a></code></pre></div>
</div>
<div id="without_message-and-without_warning" class="section level3">
<h3 class="hasAnchor">
<a href="#without_message-and-without_warning" class="anchor"></a><code>without_message</code> and <code>without_warning</code>
</h3>
<p>These two functions do the opposite, as they remove warnings and messages:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="kw">matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">ncol =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb20-2" data-line-number="2">no_warning_matrix &lt;-<span class="st"> </span><span class="kw"><a href="reference/messagefunctions.html">without_warning</a></span>(matrix)</a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="kw">no_warning_matrix</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dt">ncol =</span> <span class="dv">2</span>)</a></code></pre></div>
</div>
</div>
<div id="if_-conditions" class="section level2">
<h2 class="hasAnchor">
<a href="#if_-conditions" class="anchor"></a><code>if_</code> conditions</h2>
<p><code>if_none</code>, <code>if_any</code> and <code>if_all</code> test the elements of the list.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw"><a href="reference/scopedif.html">if_all</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="op">~</span><span class="st"> </span>.x <span class="op">&lt;</span><span class="st"> </span><span class="dv">11</span>, <span class="op">~</span><span class="st"> </span><span class="kw">return</span>(letters[<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]))</a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="co">#&gt;  [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j"</span></a>
<a class="sourceLine" id="cb21-3" data-line-number="3"></a>
<a class="sourceLine" id="cb21-4" data-line-number="4"><span class="kw"><a href="reference/scopedif.html">if_any</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, is.numeric, <span class="op">~</span><span class="st"> "Yay!"</span>)</a>
<a class="sourceLine" id="cb21-5" data-line-number="5"><span class="co">#&gt; [1] "Yay!"</span></a>
<a class="sourceLine" id="cb21-6" data-line-number="6"></a>
<a class="sourceLine" id="cb21-7" data-line-number="7"><span class="kw"><a href="reference/scopedif.html">if_none</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, is.character, <span class="op">~</span><span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">10</span>))</a>
<a class="sourceLine" id="cb21-8" data-line-number="8"><span class="co">#&gt;  [1] -0.3616333  0.5913620  1.1509275  0.5895714 -0.7026627  0.5201894</span></a>
<a class="sourceLine" id="cb21-9" data-line-number="9"><span class="co">#&gt;  [7]  0.3472766 -0.8528960 -1.3237992 -0.5573784</span></a></code></pre></div>
<p>The defaut for all <code>.p</code> is <code>isTRUE</code>. So you can:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2"></a>
<a class="sourceLine" id="cb22-3" data-line-number="3"><span class="kw"><a href="reference/scopedif.html">if_any</a></span>(a, <span class="dt">.f =</span> <span class="op">~</span><span class="st"> "nop!"</span>)</a>
<a class="sourceLine" id="cb22-4" data-line-number="4"><span class="co">#&gt; [1] "nop!"</span></a></code></pre></div>
<p><code>if_then</code> performs a simple “if this then do that”:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw"><a href="reference/ifthenelse.html">if_then</a></span>(<span class="dv">1</span>, is.numeric, <span class="op">~</span><span class="st"> "nop!"</span>)</a>
<a class="sourceLine" id="cb23-2" data-line-number="2"><span class="co">#&gt; [1] "nop!"</span></a></code></pre></div>
<p><code>if_not</code> runs <code>.f</code> if <code>.p(.x)</code> is not TRUE :</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="kw"><a href="reference/ifthenelse.html">if_not</a></span>(<span class="dt">.x =</span> <span class="dv">1</span>, <span class="dt">.p =</span> is.character, <span class="op">~</span><span class="st"> ".x is not a character"</span>)</a>
<a class="sourceLine" id="cb24-2" data-line-number="2"><span class="co">#&gt; [1] ".x is not a character"</span></a></code></pre></div>
<p>And <code>if_else</code> is a wrapper around <code><a href="http://www.rdocumentation.org/packages/base/topics/ifelse">base::ifelse()</a></code>.</p>
<p>If you want these function to return a value, you need to wrap these values into a mapper / a function. E.g, to return a vector, you’ll need to write <code><a href="reference/ifthenelse.html">if_then(1, is.numeric, ~ "Yay")</a></code>.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="kw"><a href="reference/ifthenelse.html">if_else</a></span>(<span class="dv">1</span>, is.numeric, <span class="op">~</span><span class="st"> "Yay"</span>, <span class="op">~</span><span class="st"> "Nay"</span>)</a>
<a class="sourceLine" id="cb25-2" data-line-number="2">a</a>
<a class="sourceLine" id="cb25-3" data-line-number="3"><span class="co">#&gt; [1] "Yay"</span></a></code></pre></div>
</div>
<div id="warnings-and-messages" class="section level2">
<h2 class="hasAnchor">
<a href="#warnings-and-messages" class="anchor"></a>warnings and messages</h2>
<p>The <code>stop_if</code>, <code>warn_if</code> and <code>message_if</code> are easy to use functions that send an error, a warning or a message if a condition is met. Each function has its counterpart with <code>_not</code> that returns a message if the condition is not met.</p>
<p><code>stop_if_not</code> is quite the same as <code>assert_that</code> from the {assertthat} package, except that it can takes mappers. It is not the same as base <code>stopifnot()</code>, as it doesn’t take a list of expression.</p>
<p>These functions are also flexible as you can pass base predicates (is.numeric, is.character…), a custom predicate built with mappers, or even your own predicate function.</p>
<p>You can either choose a custom message or just let the built-in messages be printed:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">12</span></a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="co"># Stop if .x is numeric</span></a>
<a class="sourceLine" id="cb26-3" data-line-number="3"><span class="kw"><a href="reference/messagehandler.html">stop_if</a></span>(<span class="dt">.x =</span> x, </a>
<a class="sourceLine" id="cb26-4" data-line-number="4">        <span class="dt">.p =</span> is.numeric)</a>
<a class="sourceLine" id="cb26-5" data-line-number="5"><span class="co">#&gt; Error: Test `is.numeric` on `x` returned an error.</span></a>
<a class="sourceLine" id="cb26-6" data-line-number="6"></a>
<a class="sourceLine" id="cb26-7" data-line-number="7">y &lt;-<span class="st"> "20"</span></a>
<a class="sourceLine" id="cb26-8" data-line-number="8"><span class="co"># stop if .x is not numeric</span></a>
<a class="sourceLine" id="cb26-9" data-line-number="9"><span class="kw"><a href="reference/messagehandler.html">stop_if_not</a></span>(<span class="dt">.x =</span> y, </a>
<a class="sourceLine" id="cb26-10" data-line-number="10">            <span class="dt">.p =</span> is.numeric, </a>
<a class="sourceLine" id="cb26-11" data-line-number="11">            <span class="dt">msg =</span> <span class="st">"y should be numeric"</span>)</a>
<a class="sourceLine" id="cb26-12" data-line-number="12"><span class="co">#&gt; Error: y should be numeric</span></a>
<a class="sourceLine" id="cb26-13" data-line-number="13">a  &lt;-<span class="st"> "this is not numeric"</span></a>
<a class="sourceLine" id="cb26-14" data-line-number="14"><span class="co"># Warn if .x is charcter</span></a>
<a class="sourceLine" id="cb26-15" data-line-number="15"><span class="kw"><a href="reference/messagehandler.html">warn_if</a></span>(<span class="dt">.x =</span> a, </a>
<a class="sourceLine" id="cb26-16" data-line-number="16">        <span class="dt">.p =</span> is.character)</a>
<a class="sourceLine" id="cb26-17" data-line-number="17"><span class="co">#&gt; Warning: Test `is.character` on `a` returned a warning.</span></a>
<a class="sourceLine" id="cb26-18" data-line-number="18"></a>
<a class="sourceLine" id="cb26-19" data-line-number="19">b  &lt;-<span class="st"> </span><span class="dv">20</span></a>
<a class="sourceLine" id="cb26-20" data-line-number="20"><span class="co"># Warn if .x is not equal to 10</span></a>
<a class="sourceLine" id="cb26-21" data-line-number="21"><span class="kw"><a href="reference/messagehandler.html">warn_if_not</a></span>(<span class="dt">.x =</span> b, </a>
<a class="sourceLine" id="cb26-22" data-line-number="22">        <span class="dt">.p =</span> <span class="op">~</span><span class="st"> </span>.x <span class="op">==</span><span class="st"> </span><span class="dv">10</span> , </a>
<a class="sourceLine" id="cb26-23" data-line-number="23">        <span class="dt">msg =</span> <span class="st">"b should be 10"</span>)</a>
<a class="sourceLine" id="cb26-24" data-line-number="24"><span class="co">#&gt; Warning: b should be 10</span></a>
<a class="sourceLine" id="cb26-25" data-line-number="25"></a>
<a class="sourceLine" id="cb26-26" data-line-number="26">c &lt;-<span class="st"> "a"</span></a>
<a class="sourceLine" id="cb26-27" data-line-number="27"><span class="co"># Message if c is a character</span></a>
<a class="sourceLine" id="cb26-28" data-line-number="28"><span class="kw"><a href="reference/messagehandler.html">message_if</a></span>(<span class="dt">.x =</span> c, </a>
<a class="sourceLine" id="cb26-29" data-line-number="29">           <span class="dt">.p =</span> is.character, </a>
<a class="sourceLine" id="cb26-30" data-line-number="30">           <span class="dt">msg =</span> <span class="st">"You entered a character element"</span>)</a>
<a class="sourceLine" id="cb26-31" data-line-number="31"><span class="co">#&gt; You entered a character element</span></a>
<a class="sourceLine" id="cb26-32" data-line-number="32"></a>
<a class="sourceLine" id="cb26-33" data-line-number="33"><span class="co"># Build more complex predicates</span></a>
<a class="sourceLine" id="cb26-34" data-line-number="34">d &lt;-<span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb26-35" data-line-number="35"><span class="kw"><a href="reference/messagehandler.html">message_if</a></span>(<span class="dt">.x =</span> d, </a>
<a class="sourceLine" id="cb26-36" data-line-number="36">           <span class="dt">.p =</span> <span class="op">~</span><span class="st"> </span><span class="kw">sqrt</span>(.x) <span class="op">&lt;</span><span class="st"> </span><span class="dv">42</span>, </a>
<a class="sourceLine" id="cb26-37" data-line-number="37">           <span class="dt">msg =</span> <span class="st">"The square root of your element must be more than 42"</span>)</a>
<a class="sourceLine" id="cb26-38" data-line-number="38"><span class="co">#&gt; The square root of your element must be more than 42</span></a>
<a class="sourceLine" id="cb26-39" data-line-number="39"></a>
<a class="sourceLine" id="cb26-40" data-line-number="40"><span class="co"># Or, if you're kind of old school, you can still pass classic functions</span></a>
<a class="sourceLine" id="cb26-41" data-line-number="41"></a>
<a class="sourceLine" id="cb26-42" data-line-number="42">e &lt;-<span class="st"> </span><span class="dv">30</span></a>
<a class="sourceLine" id="cb26-43" data-line-number="43"><span class="kw"><a href="reference/messagehandler.html">message_if</a></span>(<span class="dt">.x =</span> e, </a>
<a class="sourceLine" id="cb26-44" data-line-number="44">           <span class="dt">.p =</span> <span class="cf">function</span>(vec){</a>
<a class="sourceLine" id="cb26-45" data-line-number="45">             <span class="kw">return</span>(<span class="kw">sqrt</span>(vec) <span class="op">&lt;</span><span class="st"> </span><span class="dv">42</span>)</a>
<a class="sourceLine" id="cb26-46" data-line-number="46">           }, </a>
<a class="sourceLine" id="cb26-47" data-line-number="47">           <span class="dt">msg =</span> <span class="st">"The square root of your element must be more than 42"</span>)</a>
<a class="sourceLine" id="cb26-48" data-line-number="48"><span class="co">#&gt; The square root of your element must be more than 42</span></a></code></pre></div>
<p>If you need to call a function that takes no argument at <code>.p</code> (like <code><a href="http://www.rdocumentation.org/packages/curl/topics/nslookup">curl::has_internet()</a></code>), use this function as <code>.x</code>.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw"><a href="reference/messagehandler.html">stop_if</a></span>(<span class="dt">.x =</span> curl<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/curl/topics/nslookup">has_internet</a></span>(), <span class="dt">msg =</span> <span class="st">"You shouldn't have internet to do that"</span>)</a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="co">#&gt; Error: You shouldn't have internet to do that</span></a>
<a class="sourceLine" id="cb27-3" data-line-number="3"></a>
<a class="sourceLine" id="cb27-4" data-line-number="4"><span class="kw"><a href="reference/messagehandler.html">warn_if</a></span>(<span class="dt">.x =</span> curl<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/curl/topics/nslookup">has_internet</a></span>(), </a>
<a class="sourceLine" id="cb27-5" data-line-number="5">            <span class="dt">msg =</span> <span class="st">"You shouldn't have internet to do that"</span>)</a>
<a class="sourceLine" id="cb27-6" data-line-number="6"><span class="co">#&gt; Warning: You shouldn't have internet to do that</span></a>
<a class="sourceLine" id="cb27-7" data-line-number="7"></a>
<a class="sourceLine" id="cb27-8" data-line-number="8"><span class="kw"><a href="reference/messagehandler.html">message_if</a></span>(<span class="dt">.x =</span> curl<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/curl/topics/nslookup">has_internet</a></span>(), </a>
<a class="sourceLine" id="cb27-9" data-line-number="9">            <span class="dt">msg =</span> <span class="st">"Huray, you have internet </span><span class="ch">\\</span><span class="st">o/"</span>)</a>
<a class="sourceLine" id="cb27-10" data-line-number="10"><span class="co">#&gt; Huray, you have internet \o/</span></a></code></pre></div>
<p>If you don’t specify a <code>.p</code>, the default test is <code>isTRUE</code>.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="kw">is.na</span>(airquality<span class="op">$</span>Ozone)</a>
<a class="sourceLine" id="cb28-2" data-line-number="2"><span class="kw"><a href="reference/messagehandler.html">message_if_any</a></span>(a, <span class="dt">msg =</span> <span class="st">"NA found"</span>)</a>
<a class="sourceLine" id="cb28-3" data-line-number="3"><span class="co">#&gt; NA found</span></a></code></pre></div>
<div id="in-function" class="section level3">
<h3 class="hasAnchor">
<a href="#in-function" class="anchor"></a>In function</h3>
<p>That can come really handy inside a function:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1">my_fun &lt;-<span class="st"> </span><span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb29-2" data-line-number="2">  <span class="kw"><a href="reference/messagehandler.html">stop_if_not</a></span>(<span class="dt">.x =</span> curl<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/curl/topics/nslookup">has_internet</a></span>(), </a>
<a class="sourceLine" id="cb29-3" data-line-number="3">              <span class="dt">msg =</span> <span class="st">"You should have internet to do that"</span>)</a>
<a class="sourceLine" id="cb29-4" data-line-number="4">  <span class="kw"><a href="reference/messagehandler.html">warn_if_not</a></span>(x, </a>
<a class="sourceLine" id="cb29-5" data-line-number="5">          is.character, </a>
<a class="sourceLine" id="cb29-6" data-line-number="6">          <span class="dt">msg =</span>  <span class="st">"x is not a character vector. The output may not be what you're expecting."</span>)</a>
<a class="sourceLine" id="cb29-7" data-line-number="7">  <span class="kw">paste</span>(x, <span class="st">"is the value."</span>)</a>
<a class="sourceLine" id="cb29-8" data-line-number="8">}</a>
<a class="sourceLine" id="cb29-9" data-line-number="9"></a>
<a class="sourceLine" id="cb29-10" data-line-number="10"><span class="kw">my_fun</span>(<span class="kw">head</span>(iris))</a>
<a class="sourceLine" id="cb29-11" data-line-number="11"><span class="co">#&gt; Warning: x is not a character vector. The output may not be what you're</span></a>
<a class="sourceLine" id="cb29-12" data-line-number="12"><span class="co">#&gt; expecting.</span></a>
<a class="sourceLine" id="cb29-13" data-line-number="13"><span class="co">#&gt; [1] "c(5.1, 4.9, 4.7, 4.6, 5, 5.4) is the value."  </span></a>
<a class="sourceLine" id="cb29-14" data-line-number="14"><span class="co">#&gt; [2] "c(3.5, 3, 3.2, 3.1, 3.6, 3.9) is the value."  </span></a>
<a class="sourceLine" id="cb29-15" data-line-number="15"><span class="co">#&gt; [3] "c(1.4, 1.4, 1.3, 1.5, 1.4, 1.7) is the value."</span></a>
<a class="sourceLine" id="cb29-16" data-line-number="16"><span class="co">#&gt; [4] "c(0.2, 0.2, 0.2, 0.2, 0.2, 0.4) is the value."</span></a>
<a class="sourceLine" id="cb29-17" data-line-number="17"><span class="co">#&gt; [5] "c(1, 1, 1, 1, 1, 1) is the value."</span></a></code></pre></div>
</div>
<div id="none-all-any" class="section level3">
<h3 class="hasAnchor">
<a href="#none-all-any" class="anchor"></a>none, all, any</h3>
<p><code>stop_if</code>, <code>warn_if</code> and <code>message_if</code> all have complementary tests with <code>_all</code>, <code>_any</code> and <code>_none</code>, which combine the <code>if_*</code> and the <code>warn_*</code>, <code>stop_*</code> and <code>message_*</code> seen before. They take a list as first argument, and a predicate. They test if any, all or none of the elements validate the predicate.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="kw"><a href="reference/messagehandler.html">stop_if_any</a></span>(iris, is.factor, <span class="dt">msg =</span> <span class="st">"Factors here. This might be due to stringsAsFactors."</span>)</a>
<a class="sourceLine" id="cb30-2" data-line-number="2"><span class="co">#&gt; Error: Factors here. This might be due to stringsAsFactors.</span></a>
<a class="sourceLine" id="cb30-3" data-line-number="3"></a>
<a class="sourceLine" id="cb30-4" data-line-number="4"><span class="kw"><a href="reference/messagehandler.html">warn_if_none</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="op">~</span><span class="st"> </span>.x <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>, <span class="dt">msg =</span> <span class="st">"You need to have at least one number under zero."</span>)</a>
<a class="sourceLine" id="cb30-5" data-line-number="5"><span class="co">#&gt; Warning: You need to have at least one number under zero.</span></a>
<a class="sourceLine" id="cb30-6" data-line-number="6"></a>
<a class="sourceLine" id="cb30-7" data-line-number="7"><span class="kw"><a href="reference/messagehandler.html">message_if_all</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, is.numeric, <span class="dt">msg =</span> <span class="st">"That makes a lot of numbers."</span>)</a>
<a class="sourceLine" id="cb30-8" data-line-number="8"><span class="co">#&gt; That makes a lot of numbers.</span></a></code></pre></div>
</div>
</div>
</div>
<div id="misc" class="section level1">
<h1 class="hasAnchor">
<a href="#misc" class="anchor"></a>Misc</h1>
<div id="acknowledgments" class="section level2">
<h2 class="hasAnchor">
<a href="#acknowledgments" class="anchor"></a>Acknowledgments</h2>
<p>Thanks to <a href="http://romain.rbind.io/">Romain</a> for the name suggestion.</p>
</div>
<div id="contact" class="section level2">
<h2 class="hasAnchor">
<a href="#contact" class="anchor"></a>Contact</h2>
<p>Questions and feedbacks <a href="mailto:contact@colinfay.me">welcome</a>!</p>
<p>You want to contribute ? Open a <a href="https://github.com/ColinFay/attempt/pulls">PR</a> :) If you encounter a bug or want to suggest an enhancement, please <a href="https://github.com/ColinFay/attempt/issues">open an issue</a>.</p>
<p>Please note that this project is released with a <a href="CONDUCT.html">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=attempt">https://​cloud.r-project.org/​package=attempt</a>
</li>
<li>Report a bug at <br><a href="NA">NA</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Colin Fay <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/ColinFay/attempt"><img src="https://travis-ci.org/ColinFay/attempt.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://codecov.io/github/ColinFay/attempt?branch=master"><img src="https://codecov.io/gh/ColinFay/attempt/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
<li><a href="https://ci.appveyor.com/project/ColinFay/attempt"><img src="https://ci.appveyor.com/api/projects/status/github/ColinFay/attempt?branch=master&amp;svg=true" alt="AppVeyor Build Status"></a></li>
<li><a href="https://cran.rstudio.com/web/packages/attempt/index.html"><img src="https://cranlogs.r-pkg.org/badges/attempt"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by Colin Fay.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
